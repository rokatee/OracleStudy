SELECT USER
FROM DUAL;
--==>> SCOTT

--■■■ UPDATE ■■■--
--1. 테이블에서 기존 데이터를 변경하는 구문.

-- 2. 형식 및 구조
-- UPDATE 테이블명
-- SET 컬럼명=변경할 값[, 컬럼명=변경할 값,....]
-- [WHERE 조건절]

SELECT  *
FROM TBL_SAWON;
/*
1001	고연수	9409252234567	2005-01-03	3000
1002	김보경	9809022234567	1999-11-23	2000
1003	정미경	9810092234567	2006-08-10	4000
1004	김인교	9307131234567	1998-05-13	2000
1005	이정재	7008161234567	1998-05-13	1000
1006	아이유	9309302234567	1999-10-10	3000
1007	이하이	0302064234567	2010-10-23	4000
1008	인순이	6807102234567	1998-03-20	1500
1009	선동렬	6710261234567	1998-03-20	1300
1010	선우용녀	6511022234567	1998-12-20	2600
1011	선우선	0506174234567	2011-10-10	1300
1012	남궁민	0102033234567	2010-10-10	2400
1013	남진	0210303234567	2011-10-10	2800
1014	반보영	9903142234567	2012-11-11	5200
1015	한은영	9907292234567	2012-11-11	5200
1016	이이경	0605063234567	2015-01-20	1500
*/

--○ TBL_SAWON 테이블에서 사원번호 1004번 사원의
--   주민번호를 8805251234567
UPDATE 테이블명
SET 주민번호를 8805251234567
WHERE 사원번호 1004번 사원;

UPDATE TBL_SAWON
SET 주민번호 = 8805251234567
WHERE 사원번호 = 1004번;

UPDATE TBL_SAWON
SET JUBUN = 8805251234567
WHERE SANO = 1004;
--==>> 1 행 이(가) 업데이트되었습니다.

-- 확인
SELECT *
FROM TBL_SAWON;
/*
1001	고연수	9409252234567	2005-01-03	3000
1002	김보경	9809022234567	1999-11-23	2000
1003	정미경	9810092234567	2006-08-10	4000
1004	김인교	8805251234567	1998-05-13	2000    ◀
1005	이정재	7008161234567	1998-05-13	1000
1006	아이유	9309302234567	1999-10-10	3000
1007	이하이	0302064234567	2010-10-23	4000
1008	인순이	6807102234567	1998-03-20	1500
1009	선동렬	6710261234567	1998-03-20	1300
1010	선우용녀	6511022234567	1998-12-20	2600
1011	선우선	0506174234567	2011-10-10	1300
1012	남궁민	0102033234567	2010-10-10	2400
1013	남진	0210303234567	2011-10-10	2800
1014	반보영	9903142234567	2012-11-11	5200
1015	한은영	9907292234567	2012-11-11	5200
1016	이이경	0605063234567	2015-01-20	1500
*/

-- 실행 후 COMMIT 또는 ROLLBACK 을 반드시 선택적으로 실행
COMMIT;
--> 커밋 완료.

-- ● TBL_SAWON 테이블에서 1005번 사원의 입사일 과 급여를 
-- 각각 2020-04-11, 1200 으로 변경한다.
UPDATE TBL_SAWON
SET 입사일 과 급여를 각각 2020-04-11, 1200 으로 변경
WHERE 1005번 사원;

UPDATE TBL_SAWON
SET HIREDATE = TO_DATE('2020-04-11', 'YYYY-MM-DD'), SAL = 1200
WHERE SANO = 1005;

-- 확인
SELECT *
FROM TBL_SAWON;
--==>>
/*
1001	고연수	9409252234567	2005-01-03	3000
1002	김보경	9809022234567	1999-11-23	2000
1003	정미경	9810092234567	2006-08-10	4000
1004	김인교	8805251234567	1998-05-13	2000
1005	이정재	7008161234567	2020-04-11	1200    ◀
1006	아이유	9309302234567	1999-10-10	3000
1007	이하이	0302064234567	2010-10-23	4000
1008	인순이	6807102234567	1998-03-20	1500
1009	선동렬	6710261234567	1998-03-20	1300
1010	선우용녀	6511022234567	1998-12-20	2600
1011	선우선	0506174234567	2011-10-10	1300
1012	남궁민	0102033234567	2010-10-10	2400
1013	남진	0210303234567	2011-10-10	2800
1014	반보영	9903142234567	2012-11-11	5200
1015	한은영	9907292234567	2012-11-11	5200
1016	이이경	0605063234567	2015-01-20	1500
*/

COMMIT;
--> 커밋 완료.

--○ TBL_INSA 테이블
SELECT *
FROM TBL_INSA;

--● TBL_INSA 테이블 복사(데이터만)

CREATE TABLE TBL_INSABACKUP
AS
SELECT *
FROM TBL_INSA;
--==>>Table TBL_INSABACKUP이(가) 생성되었습니다.


--● TBL_INSABACKUP 테이블에서 
--   직위가 과장과 부장만 수당 10% 인상!
SELECT *
FROM TBL_INSABACKUP;
/*
홍길동	부장	200000
이순애	부장	160000
이기자	과장	150000
김종서	부장	130000
이상헌	과장	150000
박문수	과장	165000
김인수	부장	170000
김영길	과장	170000
정정해	과장	124000
지재환	부장	160000
최석규	과장	187000
문길수	과장	150000
허경운	부장	150000
권영미	과장	104000
이미경	부장	160000
*/

UPDATE TBL_INSABACKUP
SET 수당 10% 인상
WHERE 직위가 과장과 부장;

UPDATE TBL_INSABACKUP
--SET SUDANG = SUDANG + (SUDANG * 0.1)
SET SUDANG = SUDANG * 1.1
--WHERE JIKWI = '과장' 
--  OR JIKWI = '부장';
WHERE JIKWI IN ('과장','부장');
--==>> 15개 행 이(가) 업데이트되었습니다.

-- 확인
SELECT NAME "사원명", JIKWI "직위", SUDANG "수당"
FROM TBL_INSABACKUP
WHERE JIKWI IN ('과장','부장');
--==>>
/*
홍길동	부장	220000
이순애	부장	176000
이기자	과장	165000
김종서	부장	143000
이상헌	과장	165000
박문수	과장	181500
김인수	부장	187000
김영길	과장	187000
정정해	과장	136400
지재환	부장	176000
최석규	과장	205700
문길수	과장	165000
허경운	부장	165000
권영미	과장	114400
이미경	부장	176000
*/

COMMIT;
--> 커밋 완료.


--○ INSABACKUP 테이블에서 
--   전화번호가 016, 017, 018, 019 로 시작하는 전화번호인 경우 
--   이를 모두 010 으로 변경한다.
SELECT NAME "사원명", TEL "전화번호"
FROM TBL_INSABACKUP
WHERE SUBSTR(TEL,1,3) IN ('016', '017', '018', '019');
--WHERE TEL LIKE '016%'
--   OR TEL LIKE '017%'
--   OR TEL LIKE '018%'
--   OR TEL LIKE '019%';
--==>>
/*
김정훈	019-5236-4221
한석봉	018-5211-3542
김영년	016-2222-4444
나윤균	019-1111-2222
정한국	018-2222-4242
조미숙	019-6666-4444
이현숙	016-2548-3365
이성길	018-1333-3333
박문수	017-4747-4848
이영숙	017-5214-5282
김영길	019-8523-1478
이남신	016-1818-4848
김말숙	016-3535-3636
정정해	019-6564-6752
지재환	019-5552-7511
심심해	016-8888-7474
박세열	016-4444-7777
문길수	016-4444-5555
양미옥	016-8548-6547
허경운	017-3333-3333
산마루	018-0505-0505
정상호	016-1919-4242
정한나	016-2424-4242
이미경	016-6542-7546
*/

-- 방법 1
UPDATE TBL_INSABACKUP
SET 전화번호를 010 으로 변경
WHERE 전화번호가 016, 017, 018, 019 로 시작하는 전화번호;

--○ 참고 
-- REPLACE()
--SELECT REPLACE('MY ORACLE SERVER ORAHOME', 'ORA', '오라') "COL1"
--FROM DUAL;
--==>> MY 오라CLE SERVER 오라HOME

UPDATE TBL_INSABACKUP
SET TEL = REPLACE(TEL, SUBSTR(TEL, 1, 3), '010')
WHERE SUBSTR(TEL,1,3) IN ('016', '017', '018', '019');
--WHERE TEL LIKE '016%'
--   OR TEL LIKE '017%'
--   OR TEL LIKE '018%'
--   OR TEL LIKE '019%';
--==>> 24개 행 이(가) 업데이트되었습니다.

-- 방법2
UPDATE TBL_INSABACKUP
SET TEL = '010' || SUBSTR(TEL, 4)
WHERE SUBSTR(TEL, 1, 3) IN ('016', '017', '018', '019');

-- 확인
SELECT NAME "사원명", TEL "전화번호"
FROM TBL_INSABACKUP;
--==>>
/*
홍길동	011-2356-4528
이순신	010-4758-6532
이순애	010-4231-1236
김정훈	010-5236-4221
한석봉	010-5211-3542
이기자	010-3214-5357
장인철	011-2345-2525
김영년	010-2222-4444
나윤균	010-1111-2222
김종서	011-3214-5555
유관순	010-8888-4422
정한국	010-2222-4242
조미숙	010-6666-4444
황진이	010-3214-5467
이현숙	010-2548-3365
이상헌	010-4526-1234
엄용수	010-3254-2542
이성길	010-1333-3333
박문수	010-4747-4848
유영희	011-9595-8585
홍길남	011-9999-7575
이영숙	010-5214-5282
김인수	
김말자	011-5248-7789
우재옥	010-4563-2587
김숙남	010-2112-5225
김영길	010-8523-1478
이남신	010-1818-4848
김말숙	010-3535-3636
정정해	010-6564-6752
지재환	010-5552-7511
심심해	010-8888-7474
김미나	011-2444-4444
이정석	011-3697-7412
정영희	
이재영	011-9999-9999
최석규	011-7777-7777
손인수	010-6542-7412
고순정	010-2587-7895
박세열	010-4444-7777
문길수	010-4444-5555
채정희	011-5125-5511
양미옥	010-8548-6547
지수환	011-5555-7548
홍원신	011-7777-7777
허경운	010-3333-3333
산마루	010-0505-0505
이기상	
이미성	010-6654-8854
이미인	011-8585-5252
권영미	011-5555-7548
권옥경	010-3644-5577
김싱식	011-7585-7474
정상호	010-1919-4242
정한나	010-2424-4242
전용재	010-7549-8654
이미경	010-6542-7546
김신제	010-2415-5444
임수봉	011-4151-4154
김신애	011-4151-4444
*/

COMMIT;
--> 커밋 완료.



